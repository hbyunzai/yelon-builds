{"version":3,"file":"yunzai-iframe-page.mjs","sources":["../../../../packages/bcs/yunzai-iframe-page/yunzai-iframe-page.component.ts","../../../../packages/bcs/yunzai-iframe-page/yunzai-iframe-page.component.html","../../../../packages/bcs/yunzai-iframe-page/yunzai-iframe-page.module.ts","../../../../packages/bcs/yunzai-iframe-page/yunzai-iframe-page.ts"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {DomSanitizer, SafeResourceUrl} from \"@angular/platform-browser\";\nimport {MenuService} from \"@yelon/theme\";\nimport {LayoutDefaultService} from \"@yelon/theme/layout-default\";\n\n@Component({\n  selector: 'yunzai-iframe-page',\n  templateUrl: './yunzai-iframe-page.component.html',\n})\nexport class YunzaiIframePageComponent implements OnInit, OnDestroy {\n\n  // iframe转换后的安全路径\n  iframeSafeSrc!: SafeResourceUrl;\n\n  // 是否有iframe地址\n  hasIframe: boolean = false;\n\n  iframePageHeight!: string;\n\n  resizeHandle: any;\n  constructor(private sanitizer: DomSanitizer,\n              private menuSrv: MenuService,\n              private layoutDefaultService: LayoutDefaultService) {\n  }\n\n  ngOnInit() {\n    this.iframePageHeight = this.layoutDefaultService.options.hideHeader ? (window.innerHeight - 55 + 'px') : (window.innerHeight - 64 - 55 + 'px');\n\n    this.resizeHandle = () => {\n      this.iframePageHeight = this.layoutDefaultService.options.hideHeader ? (window.innerHeight - 55 + 'px') : (window.innerHeight - 64 - 55 + 'px');\n    }\n    window.addEventListener(\"resize\", this.resizeHandle);\n\n    this.getIframeUrl();\n  }\n\n\n  getIframeUrl(): void {\n    this.menuSrv.getRouterLink().subscribe((url: any) => {\n      if (url) {\n        this.hasIframe = true;\n        this.iframeSafeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(url);\n      } else {\n        if (localStorage.getItem('iframeSrc')) {\n          this.hasIframe = true;\n          const url: string = localStorage.getItem('iframeSrc') as string;\n          this.iframeSafeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(url);\n        } else {\n          this.hasIframe = false;\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    window.removeEventListener('resize', this.resizeHandle)\n  }\n\n}\n","<div class=\"yunzai-iframe-page\" *ngIf=\"hasIframe\" [style.height]=\"iframePageHeight\">\n  <iframe [src]=\"iframeSafeSrc\">\n    <p>您的浏览器不支持 iframe 标签。</p>\n  </iframe>\n</div>\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {YunzaiIframePageComponent} from './yunzai-iframe-page.component';\nimport {YunzaiSharedZorroModule} from \"@yelon/bcs/yunzai-shared-zorro\";\nimport {YunzaiSharedYelonModule} from \"@yelon/bcs/yunzai-shared-yelon\";\n\n\n@NgModule({\n  declarations: [\n    YunzaiIframePageComponent\n  ],\n  imports: [\n    CommonModule,\n    YunzaiSharedZorroModule,\n    YunzaiSharedYelonModule\n  ],\n  exports: [\n    YunzaiIframePageComponent\n  ]\n})\nexport class YunzaiIframePageModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}