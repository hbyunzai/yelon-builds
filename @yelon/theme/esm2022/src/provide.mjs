import { registerLocaleData } from '@angular/common';
import { ENVIRONMENT_INITIALIZER, LOCALE_ID, importProvidersFrom, inject, makeEnvironmentProviders } from '@angular/core';
import { BellOutline, DeleteOutline, InboxOutline, PlusOutline, MenuFoldOutline, MenuUnfoldOutline } from '@ant-design/icons-angular/icons';
import { YUNZAI_CONFIG } from '@yelon/util/config';
import { NzDrawerModule } from 'ng-zorro-antd/drawer';
import { NZ_DATE_LOCALE, provideNzI18n } from 'ng-zorro-antd/i18n';
import { NzIconService } from 'ng-zorro-antd/icon';
import { NzModalModule } from 'ng-zorro-antd/modal';
import { YELON_LOCALE, YELON_LOCALE_SERVICE_PROVIDER } from './locale';
import zhCN from './locale/languages/zh-CN';
import { YUNZAI_I18N_TOKEN } from './services';
import { YUNZAI_SETTING_DEFAULT } from './services/settings/settings.service';
export function provideYunzai(options) {
    const lang = options?.defaultLang;
    const provides = [
        { provide: YUNZAI_CONFIG, useValue: options?.config },
        { provide: YELON_LOCALE, useValue: lang?.yelon ?? zhCN },
        YELON_LOCALE_SERVICE_PROVIDER,
        importProvidersFrom([NzDrawerModule, NzModalModule]),
        YUNZAI_SETTING_DEFAULT
    ];
    if (lang) {
        registerLocaleData(lang.ng, lang.abbr);
        provides.push({ provide: LOCALE_ID, useValue: lang.abbr }, provideNzI18n(lang.zorro), {
            provide: NZ_DATE_LOCALE,
            useValue: lang.date
        });
    }
    const i18nCls = options?.i18nClass;
    if (i18nCls) {
        provides.push({ provide: YUNZAI_I18N_TOKEN, useClass: i18nCls, multi: false });
    }
    const icons = [
        BellOutline,
        DeleteOutline,
        PlusOutline,
        InboxOutline,
        MenuFoldOutline,
        MenuUnfoldOutline,
        ...(options.icons ?? [])
    ];
    provides.push({
        provide: ENVIRONMENT_INITIALIZER,
        multi: true,
        useValue: () => {
            inject(NzIconService, { optional: true })?.addIcon(...icons);
        }
    });
    return makeEnvironmentProviders(provides);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3RoZW1lL3NyYy9wcm92aWRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3JELE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUdULG1CQUFtQixFQUNuQixNQUFNLEVBQ04sd0JBQXdCLEVBQ3pCLE1BQU0sZUFBZSxDQUFDO0FBR3ZCLE9BQU8sRUFDTCxXQUFXLEVBQ1gsYUFBYSxFQUNiLFlBQVksRUFDWixXQUFXLEVBQ1gsZUFBZSxFQUNmLGlCQUFpQixFQUNsQixNQUFNLGlDQUFpQyxDQUFDO0FBRXpDLE9BQU8sRUFBRSxhQUFhLEVBQWdCLE1BQU0sb0JBQW9CLENBQUM7QUFFakUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxjQUFjLEVBQUUsYUFBYSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDbkUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVwRCxPQUFPLEVBQUUsWUFBWSxFQUFFLDZCQUE2QixFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3ZFLE9BQU8sSUFBSSxNQUFNLDBCQUEwQixDQUFDO0FBQzVDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLFlBQVksQ0FBQztBQUMvQyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQXNCOUUsTUFBTSxVQUFVLGFBQWEsQ0FBQyxPQUE2QjtJQUN6RCxNQUFNLElBQUksR0FBRyxPQUFPLEVBQUUsV0FBVyxDQUFDO0lBQ2xDLE1BQU0sUUFBUSxHQUEyQztRQUN2RCxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUU7UUFDckQsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxJQUFJLElBQUksRUFBRTtRQUN4RCw2QkFBNkI7UUFDN0IsbUJBQW1CLENBQUMsQ0FBQyxjQUFjLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDcEQsc0JBQXNCO0tBQ3ZCLENBQUM7SUFDRixJQUFJLElBQUksRUFBRSxDQUFDO1FBQ1Qsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3BGLE9BQU8sRUFBRSxjQUFjO1lBQ3ZCLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSTtTQUNwQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsTUFBTSxPQUFPLEdBQUcsT0FBTyxFQUFFLFNBQVMsQ0FBQztJQUNuQyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQ1osUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ2pGLENBQUM7SUFFRCxNQUFNLEtBQUssR0FBcUI7UUFDOUIsV0FBVztRQUNYLGFBQWE7UUFDYixXQUFXO1FBQ1gsWUFBWTtRQUNaLGVBQWU7UUFDZixpQkFBaUI7UUFDakIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO0tBQ3pCLENBQUM7SUFDRixRQUFRLENBQUMsSUFBSSxDQUFDO1FBQ1osT0FBTyxFQUFFLHVCQUF1QjtRQUNoQyxLQUFLLEVBQUUsSUFBSTtRQUNYLFFBQVEsRUFBRSxHQUFHLEVBQUU7WUFDYixNQUFNLENBQUMsYUFBYSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUM7UUFDL0QsQ0FBQztLQUNGLENBQUMsQ0FBQztJQUNILE9BQU8sd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlZ2lzdGVyTG9jYWxlRGF0YSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBFTlZJUk9OTUVOVF9JTklUSUFMSVpFUixcbiAgRW52aXJvbm1lbnRQcm92aWRlcnMsXG4gIExPQ0FMRV9JRCxcbiAgUHJvdmlkZXIsXG4gIFR5cGUsXG4gIGltcG9ydFByb3ZpZGVyc0Zyb20sXG4gIGluamVjdCxcbiAgbWFrZUVudmlyb25tZW50UHJvdmlkZXJzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7IEljb25EZWZpbml0aW9uIH0gZnJvbSAnQGFudC1kZXNpZ24vaWNvbnMtYW5ndWxhcic7XG5pbXBvcnQge1xuICBCZWxsT3V0bGluZSxcbiAgRGVsZXRlT3V0bGluZSxcbiAgSW5ib3hPdXRsaW5lLFxuICBQbHVzT3V0bGluZSxcbiAgTWVudUZvbGRPdXRsaW5lLFxuICBNZW51VW5mb2xkT3V0bGluZVxufSBmcm9tICdAYW50LWRlc2lnbi9pY29ucy1hbmd1bGFyL2ljb25zJztcblxuaW1wb3J0IHsgWVVOWkFJX0NPTkZJRywgWXVuemFpQ29uZmlnIH0gZnJvbSAnQHllbG9uL3V0aWwvY29uZmlnJztcbmltcG9ydCB0eXBlIHsgTnpTYWZlQW55IH0gZnJvbSAnbmctem9ycm8tYW50ZC9jb3JlL3R5cGVzJztcbmltcG9ydCB7IE56RHJhd2VyTW9kdWxlIH0gZnJvbSAnbmctem9ycm8tYW50ZC9kcmF3ZXInO1xuaW1wb3J0IHsgTlpfREFURV9MT0NBTEUsIHByb3ZpZGVOekkxOG4gfSBmcm9tICduZy16b3Jyby1hbnRkL2kxOG4nO1xuaW1wb3J0IHsgTnpJY29uU2VydmljZSB9IGZyb20gJ25nLXpvcnJvLWFudGQvaWNvbic7XG5pbXBvcnQgeyBOek1vZGFsTW9kdWxlIH0gZnJvbSAnbmctem9ycm8tYW50ZC9tb2RhbCc7XG5cbmltcG9ydCB7IFlFTE9OX0xPQ0FMRSwgWUVMT05fTE9DQUxFX1NFUlZJQ0VfUFJPVklERVIgfSBmcm9tICcuL2xvY2FsZSc7XG5pbXBvcnQgemhDTiBmcm9tICcuL2xvY2FsZS9sYW5ndWFnZXMvemgtQ04nO1xuaW1wb3J0IHsgWVVOWkFJX0kxOE5fVE9LRU4gfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7IFlVTlpBSV9TRVRUSU5HX0RFRkFVTFQgfSBmcm9tICcuL3NlcnZpY2VzL3NldHRpbmdzL3NldHRpbmdzLnNlcnZpY2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFl1bnphaVByb3ZpZGVPcHRpb25zIHtcbiAgY29uZmlnPzogWXVuemFpQ29uZmlnO1xuICAvKipcbiAgICogSW5pdGlhbGl6ZSBkZWZhdWx0IGxhbmd1YWdlXG4gICAqXG4gICAqIOWIneWni+WMlum7mOiupOivreiogFxuICAgKi9cbiAgZGVmYXVsdExhbmc/OiBZdW56YWlQcm92aWRlTGFuZztcbiAgaTE4bkNsYXNzPzogVHlwZTxOelNhZmVBbnk+O1xuICBpY29ucz86IEljb25EZWZpbml0aW9uW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgWXVuemFpUHJvdmlkZUxhbmcge1xuICBhYmJyOiBzdHJpbmc7XG4gIG5nOiBOelNhZmVBbnk7XG4gIHpvcnJvOiBOelNhZmVBbnk7XG4gIGRhdGU6IE56U2FmZUFueTtcbiAgeWVsb246IE56U2FmZUFueTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVZdW56YWkob3B0aW9uczogWXVuemFpUHJvdmlkZU9wdGlvbnMpOiBFbnZpcm9ubWVudFByb3ZpZGVycyB7XG4gIGNvbnN0IGxhbmcgPSBvcHRpb25zPy5kZWZhdWx0TGFuZztcbiAgY29uc3QgcHJvdmlkZXM6IEFycmF5PFByb3ZpZGVyIHwgRW52aXJvbm1lbnRQcm92aWRlcnM+ID0gW1xuICAgIHsgcHJvdmlkZTogWVVOWkFJX0NPTkZJRywgdXNlVmFsdWU6IG9wdGlvbnM/LmNvbmZpZyB9LFxuICAgIHsgcHJvdmlkZTogWUVMT05fTE9DQUxFLCB1c2VWYWx1ZTogbGFuZz8ueWVsb24gPz8gemhDTiB9LFxuICAgIFlFTE9OX0xPQ0FMRV9TRVJWSUNFX1BST1ZJREVSLFxuICAgIGltcG9ydFByb3ZpZGVyc0Zyb20oW056RHJhd2VyTW9kdWxlLCBOek1vZGFsTW9kdWxlXSksXG4gICAgWVVOWkFJX1NFVFRJTkdfREVGQVVMVFxuICBdO1xuICBpZiAobGFuZykge1xuICAgIHJlZ2lzdGVyTG9jYWxlRGF0YShsYW5nLm5nLCBsYW5nLmFiYnIpO1xuICAgIHByb3ZpZGVzLnB1c2goeyBwcm92aWRlOiBMT0NBTEVfSUQsIHVzZVZhbHVlOiBsYW5nLmFiYnIgfSwgcHJvdmlkZU56STE4bihsYW5nLnpvcnJvKSwge1xuICAgICAgcHJvdmlkZTogTlpfREFURV9MT0NBTEUsXG4gICAgICB1c2VWYWx1ZTogbGFuZy5kYXRlXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBpMThuQ2xzID0gb3B0aW9ucz8uaTE4bkNsYXNzO1xuICBpZiAoaTE4bkNscykge1xuICAgIHByb3ZpZGVzLnB1c2goeyBwcm92aWRlOiBZVU5aQUlfSTE4Tl9UT0tFTiwgdXNlQ2xhc3M6IGkxOG5DbHMsIG11bHRpOiBmYWxzZSB9KTtcbiAgfVxuXG4gIGNvbnN0IGljb25zOiBJY29uRGVmaW5pdGlvbltdID0gW1xuICAgIEJlbGxPdXRsaW5lLFxuICAgIERlbGV0ZU91dGxpbmUsXG4gICAgUGx1c091dGxpbmUsXG4gICAgSW5ib3hPdXRsaW5lLFxuICAgIE1lbnVGb2xkT3V0bGluZSxcbiAgICBNZW51VW5mb2xkT3V0bGluZSxcbiAgICAuLi4ob3B0aW9ucy5pY29ucyA/PyBbXSlcbiAgXTtcbiAgcHJvdmlkZXMucHVzaCh7XG4gICAgcHJvdmlkZTogRU5WSVJPTk1FTlRfSU5JVElBTElaRVIsXG4gICAgbXVsdGk6IHRydWUsXG4gICAgdXNlVmFsdWU6ICgpID0+IHtcbiAgICAgIGluamVjdChOekljb25TZXJ2aWNlLCB7IG9wdGlvbmFsOiB0cnVlIH0pPy5hZGRJY29uKC4uLmljb25zKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbWFrZUVudmlyb25tZW50UHJvdmlkZXJzKHByb3ZpZGVzKTtcbn1cbiJdfQ==