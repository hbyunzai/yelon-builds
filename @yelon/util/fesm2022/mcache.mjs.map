{"version":3,"file":"mcache.mjs","sources":["../../../../packages/util/mcache/localStorageUtils.ts","../../../../packages/util/mcache/mcache.ts"],"sourcesContent":["import { LayoutBasicAside, NavType, YunzaiNavTopic, YunzaiProjectInfo, YunzaiUser } from '@yelon/util/mtypes';\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\n\nexport const YZ_USER_KEY = '_yz_user';\nexport const YZ_PROJECT_INFO_KEY = '_yz_project_info';\nexport const YZ_CURRENT_KEY = '_yz_current';\nexport const YZ_HEADER_KEY = '_yz_header';\nexport const YZ_HEADER_TYPE_KEY = '_yz_header_type';\nexport const YZ_DEFAULT_ROUTE_KEY = '_yz_default_route';\nexport const YZ_TENANT_KEY = '_yz_tenant';\nexport const YZ_NEED_AUTH_KEY = '_yz_need_auth';\n// export const YZ_LANGS_KEY = '_yz_langs';\n// export const YZ_LANG_KEY = '_yz_lang';\n\nfunction get<T>(key: string): T | null {\n  if (key === YZ_HEADER_TYPE_KEY) {\n    return localStorage.getItem(key) as NzSafeAny;\n  }\n  const item = localStorage.getItem(key);\n  return item ? JSON.parse(item) : null;\n}\n\nfunction set<T>(key: string, data: T): void {\n  if (key === YZ_HEADER_TYPE_KEY) {\n    localStorage.setItem(YZ_HEADER_TYPE_KEY, data as string);\n    return;\n  }\n  localStorage.setItem(key, JSON.stringify(data));\n}\n\ntype returnSet<T> = (data: T) => void;\ntype returnGet<T> = () => T | null;\n\nexport function useLocalStorageUser(): [returnSet<YunzaiUser>, returnGet<YunzaiUser>] {\n  const setFn: returnSet<YunzaiUser> = user => set(YZ_USER_KEY, user);\n  const getFn: returnGet<YunzaiUser> = () => get<YunzaiUser>(YZ_USER_KEY);\n  return [setFn, getFn];\n}\n\nexport function useLocalStorageProjectInfo(): [returnSet<YunzaiProjectInfo>, returnGet<YunzaiProjectInfo>] {\n  const setFn: returnSet<YunzaiProjectInfo> = data => set(YZ_PROJECT_INFO_KEY, data);\n  const getFn: returnGet<YunzaiProjectInfo> = () => get<YunzaiProjectInfo>(YZ_PROJECT_INFO_KEY);\n  return [setFn, getFn];\n}\n\nexport function useLocalStorageCurrent(): [returnSet<LayoutBasicAside>, returnGet<LayoutBasicAside>] {\n  const setFn: returnSet<LayoutBasicAside> = data => set(YZ_CURRENT_KEY, data);\n  const getFn: returnGet<LayoutBasicAside> = () => get<LayoutBasicAside>(YZ_CURRENT_KEY);\n  return [setFn, getFn];\n}\n\nexport function useLocalStorageHeaderType(): [returnSet<NavType>, returnGet<NavType>] {\n  const setFn: returnSet<NavType> = data => set(YZ_HEADER_TYPE_KEY, data);\n  const getFn: returnGet<NavType> = () => get<NavType>(YZ_HEADER_TYPE_KEY);\n  return [setFn, getFn];\n}\n\nexport function useLocalStorageHeader(): [returnSet<YunzaiNavTopic[]>, returnGet<YunzaiNavTopic[]>] {\n  const setFn: returnSet<YunzaiNavTopic[]> = data => set(YZ_HEADER_KEY, data);\n  const getFn: returnGet<YunzaiNavTopic[]> = () => get<YunzaiNavTopic[]>(YZ_HEADER_KEY);\n  return [setFn, getFn];\n}\n\nexport function useLocalStorageDefaultRoute(): [returnSet<string>, returnGet<string>] {\n  const setFn: returnSet<string> = data => set(YZ_DEFAULT_ROUTE_KEY, data);\n  const getFn: returnGet<string> = () => get<string>(YZ_DEFAULT_ROUTE_KEY);\n  return [setFn, getFn];\n}\n\nexport function useLocalStorageTenant(): [returnSet<string>, returnGet<string>] {\n  const setFn: returnSet<string> = data => set(YZ_TENANT_KEY, data);\n  const getFn: returnGet<string> = () => get<string>(YZ_TENANT_KEY);\n  return [setFn, getFn];\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"AAGO,MAAM,WAAW,GAAG;AACpB,MAAM,mBAAmB,GAAG;AAC5B,MAAM,cAAc,GAAG;AACvB,MAAM,aAAa,GAAG;AACtB,MAAM,kBAAkB,GAAG;AAC3B,MAAM,oBAAoB,GAAG;AAC7B,MAAM,aAAa,GAAG;AACtB,MAAM,gBAAgB,GAAG;AAChC;AACA;AAEA,SAAS,GAAG,CAAI,GAAW,EAAA;AACzB,IAAA,IAAI,GAAG,KAAK,kBAAkB,EAAE;AAC9B,QAAA,OAAO,YAAY,CAAC,OAAO,CAAC,GAAG,CAAc;;IAE/C,MAAM,IAAI,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;AACtC,IAAA,OAAO,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI;AACvC;AAEA,SAAS,GAAG,CAAI,GAAW,EAAE,IAAO,EAAA;AAClC,IAAA,IAAI,GAAG,KAAK,kBAAkB,EAAE;AAC9B,QAAA,YAAY,CAAC,OAAO,CAAC,kBAAkB,EAAE,IAAc,CAAC;QACxD;;AAEF,IAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AACjD;SAKgB,mBAAmB,GAAA;AACjC,IAAA,MAAM,KAAK,GAA0B,IAAI,IAAI,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC;IACnE,MAAM,KAAK,GAA0B,MAAM,GAAG,CAAa,WAAW,CAAC;AACvE,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;SAEgB,0BAA0B,GAAA;AACxC,IAAA,MAAM,KAAK,GAAiC,IAAI,IAAI,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC;IAClF,MAAM,KAAK,GAAiC,MAAM,GAAG,CAAoB,mBAAmB,CAAC;AAC7F,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;SAEgB,sBAAsB,GAAA;AACpC,IAAA,MAAM,KAAK,GAAgC,IAAI,IAAI,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC;IAC5E,MAAM,KAAK,GAAgC,MAAM,GAAG,CAAmB,cAAc,CAAC;AACtF,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;SAEgB,yBAAyB,GAAA;AACvC,IAAA,MAAM,KAAK,GAAuB,IAAI,IAAI,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC;IACvE,MAAM,KAAK,GAAuB,MAAM,GAAG,CAAU,kBAAkB,CAAC;AACxE,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;SAEgB,qBAAqB,GAAA;AACnC,IAAA,MAAM,KAAK,GAAgC,IAAI,IAAI,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC;IAC3E,MAAM,KAAK,GAAgC,MAAM,GAAG,CAAmB,aAAa,CAAC;AACrF,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;SAEgB,2BAA2B,GAAA;AACzC,IAAA,MAAM,KAAK,GAAsB,IAAI,IAAI,GAAG,CAAC,oBAAoB,EAAE,IAAI,CAAC;IACxE,MAAM,KAAK,GAAsB,MAAM,GAAG,CAAS,oBAAoB,CAAC;AACxE,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;SAEgB,qBAAqB,GAAA;AACnC,IAAA,MAAM,KAAK,GAAsB,IAAI,IAAI,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC;IACjE,MAAM,KAAK,GAAsB,MAAM,GAAG,CAAS,aAAa,CAAC;AACjE,IAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACvB;;ACzEA;;AAEG;;;;"}